//stream.proto
syntax = "proto3" ;

option go_package = "./;protoMq" ;

// 推送数据参数
message ReqPushData{
  bool   WaitRes = 1 ; // 等待服务器响应
  string Ch      = 2 ; // 频道
  bytes  Data    = 3 ; // 数据内容
}

// 推送数据返回
message ResPushData{
  int32  ErrNum = 1 ; // 错误编号，0为正常
}

// 拉取数据参数
message ReqPullData{
  string User    = 1 ; // 用户
  string Ch      = 2 ; // 频道
  bool   BKType  = 3 ; // bucket参数类型 false:使用远端存储的位置 true:使用传递的参数
  string BKName  = 4 ; // bucket name
  string BKKey   = 5 ; // bucket key
}

// 拉取数据返回
message ResPullData{
  int32  ErrNum = 1 ; // 错误编号，0为正常
  string BKName = 2 ; // bucket name
  string BKKey  = 3 ; // bucket key
  bytes  Data   = 4 ; // 数据内容
}

// 流需要stream 标识
service Mq {
  rpc  PushData(stream ReqPushData) returns (stream ResPushData);
  rpc  PullData(ReqPullData) returns (stream ResPullData);
}

/*
protoc --go_out=./ mq.proto
protoc --go-grpc_out=./ mq.proto
 */
